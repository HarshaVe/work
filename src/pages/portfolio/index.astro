---
import { getCollection } from 'astro:content';
import Layout from '../../layouts/Layout.astro';

const portfolioEntries = await getCollection('portfolio');
const sortedEntries = portfolioEntries.sort((a, b) => a.data.order - b.data.order);

const breadcrumbs = [
  { label: 'Home', href: '/' },
  { label: 'Portfolio' }
];

const actionLink = { label: '→ View full resume', href: '/resume' };
---

<Layout title="Portfolio" breadcrumbs={breadcrumbs} actionLink={actionLink}>
  <h1>Portfolio</h1>
  <p class="intro">Selected work from 25+ years leading design teams across regulated industries, enterprise B2B, and emerging technology.</p>
  
  <ul class="portfolio-list">
    {sortedEntries.map((entry) => (
      <li class="portfolio-list-item">
        {entry.data.heroImage && (
          <a href={`/portfolio/${entry.slug}`} class="portfolio-thumbnail">
            <img src={entry.data.heroImage} alt={entry.data.title} />
          </a>
        )}
        <div class="portfolio-list-content">
          <a href={`/portfolio/${entry.slug}`} class="portfolio-title">{entry.data.title}</a>
          <span class="portfolio-company"> — {entry.data.company}</span>
          <p>{entry.data.description}</p>
        </div>
      </li>
    ))}
  </ul>
</Layout>
